<html>
  <head>
    <meta charset="utf-8">

    <title>Sand Game</title>

    <link rel="stylesheet" href="css/main.css" type="text/css">
  </head>

  <body>

    <canvas></canvas>

    <div class="sidebar">

      <p>Press "r" for stone/rock on and off</p>
      <p>Press "w" for water on and off</p>
      <p>Press "c" for cloud on and off</p>
      <p>Press "e" for dirt/earth on and off</p>
      <p>Press "s" for sand on and off</p>
      <p>Press "f" for seed (flower) on and off</p>

      <p>Press "d" for delete on and off</p>

      <p>p to save</p>
      <p>o to open saved game</p>

    </div>
    

    <script type="application/javascript" src="lib/game.js"></script>
    <script type="application/javascript" src="lib/gameView.js"></script>
    <script type="application/javascript" src="lib/util.js"></script>
    <script type="application/javascript" src="lib/movingParticle.js"></script>
    <script type="application/javascript" src="lib/sandParticle.js"></script>
    <script type="application/javascript" src="lib/dirtParticle.js"></script>
    <script type="application/javascript" src="lib/stoneParticle.js"></script>
    <script type="application/javascript" src="lib/waterParticle.js"></script>
    <script type="application/javascript" src="lib/seedParticle.js"></script>
    <script type="application/javascript" src="lib/flower.js"></script>
    <script type="application/javascript" src="lib/stalk.js"></script>
    <script type="application/javascript" src="lib/cloudParticle.js"></script>
    

    <script type="application/javascript">
      (function () {
        var canvasEl = document.getElementsByTagName("canvas")[0];
        SandGame.Game.DIM_X = window.innerWidth - 250;
        SandGame.Game.DIM_Y = window.innerHeight;
        canvasEl.width = SandGame.Game.DIM_X;
        canvasEl.height = SandGame.Game.DIM_Y;

        var ctx = canvasEl.getContext("2d");
        var game = new SandGame.Game();
        new SandGame.GameView(game, ctx).start();
 
        function fullscreen(){
                   if(canvasEl.webkitRequestFullScreen) {
                       canvasEl.webkitRequestFullScreen();
                   }
                  else {
                     canvasEl.mozRequestFullScreen();
                  }            
        }
 
        canvasEl.addEventListener("click .full_screen",fullscreen)

        canvasEl.onmousedown = function(event){
          game.mouseDown();
        };

        canvasEl.onmousemove = function(event){
          // ctx;
          // canvasEl;
          // debugger;
          game.moveMouse(event.offsetX, event.offsetY);
        };

        canvasEl.onmouseup = function(event){
          game.mouseUp();
        };

        this.onkeypress = function(event){
          if (String.fromCharCode(event.charCode) === "r"){
            game.toggleMode("stone");
          } else if (String.fromCharCode(event.charCode) === "w"){
            game.toggleMode("water");
          } else if (String.fromCharCode(event.charCode) === "c"){
            game.toggleMode("cloud");
          } else if (String.fromCharCode(event.charCode) === "e"){
            game.toggleMode("dirt");
          } else if (String.fromCharCode(event.charCode) === "f"){
            game.toggleMode("seed");
          } else if (String.fromCharCode(event.charCode) === "s"){
            game.toggleMode("sand");
          } else if (String.fromCharCode(event.charCode) === "d"){
            game.toggleMode("deletePen");
          } else if (String.fromCharCode(event.charCode) === "p"){
            game.showSave();
          } else if (String.fromCharCode(event.charCode) === "o"){
            game.loadGame();
          } else if (String.fromCharCode(event.charCode) === "l"){
            fullscreen();
          }
        }
      })();
    </script>
  </body>
</html>
